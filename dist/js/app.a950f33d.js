(function(t){function e(e){for(var i,n,o=e[0],c=e[1],d=e[2],u=0,h=[];u<o.length;u++)n=o[u],s[n]&&h.push(s[n][0]),s[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(h.length)h.shift()();return a.push.apply(a,d||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,o=1;o<r.length;o++){var c=r[o];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=n(n.s=r[0]))}return t}var i={},s={app:0},a=[];function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0466":function(t,e,r){},"42d0":function(t,e,r){},5617:function(t,e,r){"use strict";var i=r("e363"),s=r.n(i);s.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var i=r("2b0e"),s=r("8c4f"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Broadcast")},n=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},t._l(t.windows,function(e,i){return r("div",{key:i,staticClass:"broadcast",class:{"broadcast--loading":e.url,"broadcast--disabled":e.disabled,"broadcast--first":e.index===t.firstWindow&&!e.disabled,"broadcast--hidden":e.index===t.hiddenWindow,"broadcast--scale":1===t.hiddenWindow,"broadcast--flicker":t.checkSelectVideoUrl},on:{click:function(e){t.selectWindow(i,t.checkSelectVideoUrl)}}},[e.disabled?r("div",{staticClass:"broadcast__append",on:{click:t.addBroadcast}}):t._e(),r("div",{staticClass:"broadcast__bar"},[null!==t.hiddenWindow?r("div",{staticClass:"broadcast__btn broadcast__btn--maximize",attrs:{title:"Развернуть окно добавления"},on:{click:function(r){t.toggleWindows(e.index)}}}):t._e(),e.disabled&&null===t.hiddenWindow?r("div",{staticClass:"broadcast__btn broadcast__btn--minimize",attrs:{title:"Свернуть окно"},on:{click:function(r){t.toggleWindows(e.index)}}}):t._e(),e.chat.url.length?r("div",{staticClass:"broadcast__btn broadcast__btn--chat",attrs:{title:"Показать/скрыть чат"},on:{click:function(e){t.toggleChat(i)}}}):t._e(),e.index!==t.firstWindow?r("div",{staticClass:"broadcast__btn broadcast__btn--expand",attrs:{title:"Сделать основным"},on:{click:function(r){t.mainWindow(e.index)}}}):t._e(),r("div",{staticClass:"broadcast__btn broadcast__btn--close",attrs:{title:"Удалить окно"},on:{click:function(r){t.deleteBroadcast(i,e.index)}}})]),r("div",{staticClass:"broadcast__number",domProps:{innerHTML:t._s(e.index)}}),r("div",{staticClass:"broadcast__video"},[r("iframe",{attrs:{width:"560",height:"315",src:e.url,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),r("transition",{attrs:{name:"broadcast__chat-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.chat.show,expression:"win.chat.show"}],staticClass:"broadcast__chat"},[r("iframe",{attrs:{width:"240",height:"315",src:e.chat.url,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])])],1),r("div",{staticClass:"broadcast__panel"},[r("keep-alive",[r("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.url,expression:"win.url",modifiers:{trim:!0,lazy:!0}}],attrs:{type:"text",placeholder:"Вставьте URL"},domProps:{value:e.url},on:{change:[function(r){t.$set(e,"url",r.target.value.trim())},function(e){t.lineProcessing(i)}],blur:function(e){t.$forceUpdate()}}})]),r("div",{staticClass:"broadcast__panel-enter",attrs:{title:"Ввод"},on:{click:function(e){t.lineProcessing(i)}}})],1),r("error-box",{attrs:{index:i}})],1)}),0)},c=[],d=r("f596"),l=r.n(d),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"error-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.error.index===t.index,expression:"error.index === index"}],staticClass:"error-box",on:{mouseenter:t.closeError}},[r("div",{staticClass:"error-box__message",domProps:{innerHTML:t._s(t.error.text)}})])])},h=[],w={name:"Error",props:{index:{required:!0,default:""}},data:function(){return{result:{}}},methods:{closeError:function(){this.$store.dispatch("clearError")}},computed:{error:function(){return this.$store.getters.error}}},f=w,p=(r("7ab1"),r("2877")),m=Object(p["a"])(f,u,h,!1,null,null,null);m.options.__file="Error.vue";var v=m.exports,b={name:"Broadcast",data:function(){return{windows:[{index:1,url:"",disabled:0,chat:{url:"",show:1}}],windowsInterator:0,firstWindow:1,hiddenWindow:null}},components:{errorBox:v},computed:{checkSelectVideoUrl:function(){return this.$store.getters.getSelectVideoUrl}},methods:{lineProcessing:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.url||this.windows[t].url,i=l.a.parse(r);if(void 0===i)return this.$store.dispatch("setError",{text:"Введенный адрес ресурса не поддерживается",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;if(e.hasOwnProperty("show")&&(this.windows[t].chat.show=e.chat.show),"youtube"===i.provider){var s="?autoplay=1"+(t?"&mute=1":"&mute=0");if(!i.id)return this.$store.dispatch("setError",{text:"Проверьте URL введенного YouTube канала",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;this.windows[t].url="https://www.youtube.com/embed/".concat(i.id).concat(s),this.windows[t].chat.url="https://www.youtube.com/live_chat?v=".concat(i.id,"&embed_domain=").concat(document.domain)}if("twitch"===i.provider){var a="&autoplay=true"+(t?"&muted=true":"&muted=false");if(i.channel&&"directory"!==i.channel)this.windows[t].url="https://player.twitch.tv/?channel=".concat(i.channel).concat(a),this.windows[t].chat.url="https://www.twitch.tv/embed/".concat(i.channel,"/chat?darkpopout");else{if(!i.id)return this.$store.dispatch("setError",{text:"Проверьте URL введенного Twitch канала",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;this.windows[t].url="https://player.twitch.tv/?video=".concat(i.id).concat(a),this.windows[t].chat.url="https://www.twitch.tv/embed/".concat(i.channel,"/chat?darkpopout")}}},addBroadcast:function(){var t=this.windows[this.windowsInterator];t.disabled=0,this.windowsInterator++,this.$set(this.windows,this.windowsInterator,{url:"",disabled:1,chat:{url:"",show:0},index:t.index+1})},deleteBroadcast:function(t,e){this.$delete(this.windows,t),this.windowsInterator--,this.firstWindow===e&&this.mainWindow(this.windows[0].index),this.hiddenWindow=this.windowsInterator?this.hiddenWindow:null},mainWindow:function(t){this.firstWindow=t},toggleWindows:function(t){null===this.hiddenWindow?this.hiddenWindow=t:this.hiddenWindow=null},toggleChat:function(t){var e=this.windows[t].chat;e.show=!e.show},selectWindow:function(t,e){e&&(this.lineProcessing(t,{url:e}),this.$store.dispatch("clearSelectVideoUrl"))}},mounted:function(){},created:function(){var t=this;this.addBroadcast(),Q.$on("urlUpdated",function(e){var r=0;e=e||{url:"https://www.youtube.com/embed/oI3GdbsbDxk",chat:{show:1}},t.lineProcessing(r,e)})}},_=b,g=(r("5617"),Object(p["a"])(_,o,c,!1,null,"64f61992",null));g.options.__file="Broadcast.vue";var S=g.exports,x={name:"home",data:function(){return{}},components:{Broadcast:S},methods:{}},y=x,C=Object(p["a"])(y,a,n,!1,null,null,null);C.options.__file="Home.vue";var k=C.exports;i["a"].use(s["a"]);var $=new s["a"]({routes:[{path:"",name:"home",component:k}],mode:"history"}),E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("header",{staticClass:"header"},[r("router-link",{staticClass:"logo",attrs:{to:"/"}}),r("search-bar"),r("span",{staticClass:"guide",on:{click:t.toggleSidebar}})],1),r("transition",{attrs:{name:"shadow-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.checkSearchResult,expression:"checkSearchResult"}],staticClass:"shadow",on:{click:function(e){t.hideSearchResult(!1)}}})]),r("side-bar"),r("error-box",{attrs:{index:"main"}}),r("router-view")],1)},U=[],R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.sidebarShowHold,expression:"sidebarShowHold"}],staticClass:"sidebar"},[r("transition",{attrs:{name:"sidebar__wrapper-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.sidebarShow,expression:"sidebarShow"}],staticClass:"sidebar__wrapper"},[r("div",{staticClass:"sidebar__header"},[r("span",{staticClass:"guide",on:{click:t.toggleSidebar}})]),r("div",{staticClass:"sidebar__content sidebar__content--scroll"},[r("div",{staticClass:"sidebar-group"},[r("div",{staticClass:"sidebar-group__title"},[t._v("\n                        Тестовый функционал\n                    ")]),r("div",{staticClass:"sidebar-group__item",on:{click:t.insertVideo}},[r("span",[t._v("Показать тестовое видео")])]),r("div",{staticClass:"sidebar-group__item",on:{click:t.openError}},[r("span",[t._v("Показать ошибку")])])])]),r("div",{staticClass:"sidebar__footer"},[t._v("\n                Ресурс позволяет пользователю одновременно просматривать несколько стримов или видео с YouTube и Twitch.\n            ")]),r("div",{staticClass:"sidebar__copyright"},[t._v("\n                © 2018 Levin Pavel, MIT\n            ")])])]),r("transition",{attrs:{name:"sidebar__shadow-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.shadowShow,expression:"shadowShow"}],staticClass:"sidebar__shadow",on:{click:t.toggleSidebar}})])],1)},V=[],W={name:"Sidebar",data:function(){return{sidebarShowHold:0,sidebarShow:0,shadowShow:0}},methods:{toggleSidebar:function(){this.sidebarShow=!this.sidebarShow,this.shadowShow=!this.shadowShow,this.sidebarShow?document.querySelector("html").setAttribute("class","hide-scroll"):document.querySelector("html").removeAttribute("class")},insertVideo:function(){Q.$emit("urlUpdated"),this.toggleSidebar()},openError:function(){this.$store.dispatch("setError",{text:"Пример общей ошибки",index:"main"}),this.toggleSidebar()}},watch:{sidebarShow:function(){var t=this;this.sidebarShowHold?setTimeout(function(){t.sidebarShowHold=!t.sidebarShowHold},200):this.sidebarShowHold=!this.sidebarShowHold}},created:function(){var t=this;Q.$on("sidebarShow",function(){t.toggleSidebar()})}},O=W,P=(r("f203"),Object(p["a"])(O,R,V,!1,null,null,null));P.options.__file="Sidebar.vue";var B=P.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-search"},[r("keep-alive",[r("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.query,expression:"query",modifiers:{trim:!0,lazy:!0}}],staticClass:"form-search__input",attrs:{type:"search",placeholder:"Введите запрос"},domProps:{value:t.query},on:{click:t.clearSelectVideoUrl,change:[function(e){t.query=e.target.value.trim()},t.sendingRequest],blur:function(e){t.$forceUpdate()}}})]),r("div",{staticClass:"form-search__btn",on:{click:t.sendingRequest}}),t.showResult?r("ul",{staticClass:"form-search-list form-search-list--scroll"},t._l(t.result.items,function(e,i){return r("li",{key:i,staticClass:"form-search-list__item",on:{click:function(r){t.selectVideoUrl(e.id.videoId)}}},[r("div",{staticClass:"form-search-list__thumb"},[r("img",{attrs:{src:e.snippet.thumbnails.default.url,alt:e.snippet.title}})]),r("div",{staticClass:"form-search-list__title"},[t._v("\n                "+t._s(e.snippet.title)+"\n            ")]),r("div",{staticClass:"form-search-list__channel"},[t._v("\n                "+t._s(e.snippet.channelTitle)+"\n            ")])])}),0):t._e()],1)},q=[],H={name:"SearchBar",data:function(){return{provider:"youtube",query:"",result:!1,showResult:!1}},computed:{checkSearchResult:function(){return this.$store.getters.getSearchShadow}},methods:{selectVideoUrl:function(t){"youtube"===this.provider&&t.length?this.$store.dispatch("setSelectVideoUrl","https://www.youtube.com/embed/".concat(t)):this.$store.dispatch("setError",{text:"Не удалось получить videoId",index:"main"}),this.toggleResult(!1)},clearSelectVideoUrl:function(){this.$store.dispatch("clearSelectVideoUrl")},sendingRequest:function(){var t=this;"youtube"===this.provider&&this.query.length?this.$store.dispatch("search",this.query).then(function(){t.result=t.$store.getters.getSearchData,t.result.pageInfo.totalResults?t.toggleResult(!0):(t.toggleResult(!1),t.$store.dispatch("setError",{text:"Поиск не дал результатов",index:"main"}))}).catch(function(){}):(this.toggleResult(!1),this.$store.dispatch("setError",{text:"Поисковый запрос пуст",index:"main"}))},toggleResult:function(t){this.showResult=t,this.$store.dispatch("setShadow",t)}},created:function(){var t=this;Q.$on("searchHide",function(e){t.toggleResult(e)})}},I=H,T=(r("6a2d"),Object(p["a"])(I,j,q,!1,null,"999e6fb8",null));T.options.__file="SearchBar.vue";var L=T.exports,D={name:"app",data:function(){return{}},components:{errorBox:v,sideBar:B,searchBar:L},computed:{checkSearchResult:function(){return this.$store.getters.getSearchShadow}},methods:{toggleSidebar:function(){Q.$emit("sidebarShow")},hideSearchResult:function(t){Q.$emit("searchHide",t)}}},N=D,z=(r("5c0b"),Object(p["a"])(N,E,U,!1,null,null,null));z.options.__file="App.vue";var M=z.exports,A=r("2f62"),G={state:{loading:!1,error:""},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},clearError:function(t){t.error=""}},actions:{setLoading:function(t,e){var r=t.commit;r("setLoading",e)},setError:function(t,e){var r=t.commit;r("setError",e)},clearError:function(t){var e=t.commit;e("clearError")}},getters:{loading:function(t){return t.loading},error:function(t){return t.error}}},J=(r("96cf"),r("1da1")),X=r("a236"),Y=r.n(X),F={state:{selectVideoUrl:!1,searchData:{},searchShadow:!1},mutations:{setSelectVideoUrl:function(t,e){t.selectVideoUrl=e},setSearchData:function(t,e){t.searchData=e},setShadow:function(t,e){t.searchShadow=e},clearSelectVideoUrl:function(t){t.selectVideoUrl=!1}},actions:{setSelectVideoUrl:function(t,e){var r=t.commit;r("setSelectVideoUrl",e)},setShadow:function(t,e){var r=t.commit;r("setShadow",e)},clearSelectVideoUrl:function(t){var e=t.commit;e("clearSelectVideoUrl")},search:function(){var t=Object(J["a"])(regeneratorRuntime.mark(function t(e,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.commit,i("clearError"),t.prev=2,t.next=5,Y()("AIzaSyAOmRCB6nA7SR2_XnPR9XaGWpSyB-f7mrs",{q:r,part:"snippet",type:"video",maxResults:35});case 5:s=t.sent,i("setSearchData",s),i("setLoading",!1),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](2),i("setError",{text:"Неизвестная ошибка",index:"main"}),i("setLoading",!1),t.t0;case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,r){return t.apply(this,arguments)}}()},getters:{getSelectVideoUrl:function(t){return t.selectVideoUrl},getSearchData:function(t){return t.searchData},getSearchShadow:function(t){return t.searchShadow}}};i["a"].use(A["a"]);var K=new A["a"].Store({modules:{common:G,search:F}});r.d(e,"eventEmitter",function(){return Q}),i["a"].config.productionTip=!1;var Q=new i["a"];new i["a"]({render:function(t){return t(M)},router:$,store:K}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var i=r("5e27"),s=r.n(i);s.a},"5e27":function(t,e,r){},"6a2d":function(t,e,r){"use strict";var i=r("dd3e"),s=r.n(i);s.a},"7ab1":function(t,e,r){"use strict";var i=r("42d0"),s=r.n(i);s.a},dd3e:function(t,e,r){},e363:function(t,e,r){},f203:function(t,e,r){"use strict";var i=r("0466"),s=r.n(i);s.a}});
//# sourceMappingURL=app.a950f33d.js.map