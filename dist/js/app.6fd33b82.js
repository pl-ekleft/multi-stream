(function(t){function e(e){for(var i,a,o=e[0],c=e[1],d=e[2],u=0,h=[];u<o.length;u++)a=o[u],r[a]&&h.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(h.length)h.shift()();return n.push.apply(n,d||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},r={app:0},n=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0466":function(t,e,s){},"0510":function(t,e,s){"use strict";var i=s("1e8d"),r=s.n(i);r.a},"1e8d":function(t,e,s){},"42d0":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var i=s("2b0e"),r=s("8c4f"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Broadcast")},a=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},t._l(t.windows,function(e,i){return s("div",{key:i,staticClass:"broadcast",class:{"broadcast--loading":e.url,"broadcast--disabled":e.disabled,"broadcast--first":e.index===t.settings.firstWindow&&!e.disabled,"broadcast--hidden":e.index===t.settings.hiddenWindow,"broadcast--scale":1===t.settings.hiddenWindow,"broadcast--flicker":t.checkSelectVideoUrl},on:{click:function(e){t.selectWindow(i,t.checkSelectVideoUrl)}}},[e.disabled?s("div",{staticClass:"broadcast__append",on:{click:t.addBroadcast}}):t._e(),s("div",{staticClass:"broadcast__bar"},[null!==t.settings.hiddenWindow?s("div",{staticClass:"broadcast__btn broadcast__btn--maximize",attrs:{title:"Развернуть окно добавления"},on:{click:function(s){t.toggleWindows(e.index)}}}):t._e(),e.disabled&&null===t.settings.hiddenWindow?s("div",{staticClass:"broadcast__btn broadcast__btn--minimize",attrs:{title:"Свернуть окно"},on:{click:function(s){t.toggleWindows(e.index)}}}):t._e(),e.chat.url.length?s("div",{staticClass:"broadcast__btn broadcast__btn--chat",attrs:{title:"Показать/скрыть чат"},on:{click:function(e){t.toggleChat(i)}}}):t._e(),e.index!==t.settings.firstWindow?s("div",{staticClass:"broadcast__btn broadcast__btn--expand",attrs:{title:"Сделать основным"},on:{click:function(s){t.mainWindow(e.index)}}}):t._e(),s("div",{staticClass:"broadcast__btn broadcast__btn--close",attrs:{title:"Удалить окно"},on:{click:function(s){t.deleteBroadcast(i,e.index)}}})]),s("div",{staticClass:"broadcast__number",domProps:{innerHTML:t._s(e.index)}}),s("div",{staticClass:"broadcast__video"},[s("iframe",{attrs:{width:"560",height:"315",src:e.url,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),s("transition",{attrs:{name:"broadcast__chat-"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.chat.show,expression:"win.chat.show"}],staticClass:"broadcast__chat"},[s("iframe",{attrs:{width:"240",height:"315",src:e.chat.url,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])])],1),s("div",{staticClass:"broadcast__panel"},[s("keep-alive",[s("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.url,expression:"win.url",modifiers:{trim:!0,lazy:!0}}],attrs:{type:"text",placeholder:"Вставьте URL"},domProps:{value:e.url},on:{change:[function(s){t.$set(e,"url",s.target.value.trim())},function(e){t.lineProcessing(i)}],blur:function(e){t.$forceUpdate()}}})]),s("div",{staticClass:"broadcast__panel-enter",attrs:{title:"Ввод"},on:{click:function(e){t.lineProcessing(i)}}})],1),s("error-box",{attrs:{index:i}})],1)}),0)},c=[],d=(s("7f7f"),s("f596")),l=s.n(d),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"error-"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.error.index===t.index,expression:"error.index === index"}],staticClass:"error-box",on:{mouseenter:t.closeError}},[s("div",{staticClass:"error-box__message",domProps:{innerHTML:t._s(t.error.text)}})])])},h=[],w={name:"Error",props:{index:{required:!0,default:""}},data:function(){return{result:{}}},methods:{closeError:function(){this.$store.dispatch("clearError")}},computed:{error:function(){return this.$store.getters.error}}},f=w,p=(s("7ab1"),s("2877")),m=Object(p["a"])(f,u,h,!1,null,null,null),g=m.exports,b={name:"Broadcast",data:function(){return{windows:[{chat:{url:"",show:1},disabled:0,index:1,url:""}],localWindows:null,settings:{windowsInterator:0,firstWindow:1,hiddenWindow:null},localSettings:null}},components:{errorBox:g},computed:{checkSelectVideoUrl:function(){return this.$store.getters.getSelectVideoUrl}},methods:{lineProcessing:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.url||this.windows[t].url,i=l.a.parse(s);if(void 0===i)return this.$store.dispatch("setError",{text:"Введенный адрес ресурса не поддерживается",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;if(e.hasOwnProperty("show")&&(this.windows[t].chat.show=e.chat.show),"youtube"===i.provider){var r="?autoplay=1"+(t?"&mute=1":"&mute=0");if(!i.id)return this.$store.dispatch("setError",{text:"Проверьте URL введенного YouTube канала",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;this.windows[t].url="https://www.youtube.com/embed/".concat(i.id).concat(r),this.windows[t].chat.url="https://www.youtube.com/live_chat?v=".concat(i.id,"&embed_domain=").concat(document.domain)}if("twitch"===i.provider){var n="&autoplay=true"+(t?"&muted=true":"&muted=false");if(i.channel&&"directory"!==i.channel)this.windows[t].url="https://player.twitch.tv/?channel=".concat(i.channel).concat(n),this.windows[t].chat.url="https://www.twitch.tv/embed/".concat(i.channel,"/chat?darkpopout");else{if(!i.id)return this.$store.dispatch("setError",{text:"Проверьте URL введенного Twitch канала",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;this.windows[t].url="https://player.twitch.tv/?video=".concat(i.id).concat(n),this.windows[t].chat.url="https://www.twitch.tv/embed/".concat(i.channel,"/chat?darkpopout")}}this.updateLocalStorage("windows")},addBroadcast:function(){var t=this.windows[this.settings.windowsInterator];t.disabled=0,this.settings.windowsInterator++,this.$set(this.windows,this.settings.windowsInterator,{chat:{url:"",show:0},disabled:1,index:t.index+1,url:""}),this.updateLocalStorage("settings")},deleteBroadcast:function(t,e){this.$delete(this.windows,t),this.settings.windowsInterator--,this.settings.firstWindow===e&&this.mainWindow(this.windows[0].index),this.settings.hiddenWindow=this.settings.windowsInterator?this.settings.hiddenWindow:null,this.updateLocalStorage("settings")},mainWindow:function(t){this.settings.firstWindow=t,this.updateLocalStorage("settings")},toggleWindows:function(t){null===this.settings.hiddenWindow?this.settings.hiddenWindow=t:this.settings.hiddenWindow=null,this.updateLocalStorage("settings")},toggleChat:function(t){var e=this.windows[t].chat;e.show=!e.show,this.updateLocalStorage("windows")},selectWindow:function(t,e){e&&(this.lineProcessing(t,{url:e}),this.$store.dispatch("clearSelectVideoUrl"))},removeLocalStorage:function(){this.windows=[{chat:{url:"",show:1},disabled:0,index:1,url:""}],this.settings={windowsInterator:0,firstWindow:1,hiddenWindow:null},this.addBroadcast()},updateLocalStorage:function(t){localStorage.setItem(t,JSON.stringify(this[t]))}},watch:{windows:function(t){localStorage.windows=JSON.stringify(t)},settings:function(t){localStorage.settings=JSON.stringify(t)}},mounted:function(){localStorage.windows&&(this.windows=JSON.parse(localStorage.windows)),localStorage.settings&&(this.settings=JSON.parse(localStorage.settings))},created:function(){var t=this;null===this.localWindows&&this.addBroadcast(),at.$on("urlUpdate",function(e){var s=0;e=e||{url:"https://www.youtube.com/embed/oI3GdbsbDxk",chat:{show:1}},t.lineProcessing(s,e)}),at.$on("cleanUpdate",function(){t.removeLocalStorage()})}},v=b,_=(s("d3c9"),Object(p["a"])(v,o,c,!1,null,"8f5d8d80",null)),S=_.exports,x={name:"home",data:function(){return{}},components:{Broadcast:S},methods:{}},y=x,C=Object(p["a"])(y,n,a,!1,null,null,null),k=C.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("h1",[t._v("Локальное хранилище:")]),s("pre",[t._v(t._s(t.windows))])])},W=[],U={name:"history",data:function(){return{windows:{}}},components:{},methods:{checkWindows:function(){null!==localStorage.windows&&(this.windows=JSON.parse(localStorage.windows))}},created:function(){this.checkWindows()}},E=U,R=(s("5fd1"),Object(p["a"])(E,$,W,!1,null,"1687c3b3",null)),O=R.exports;i["a"].use(r["a"]);var V=new r["a"]({routes:[{path:"",name:"home",component:k},{path:"/history",name:"history",component:O}],mode:"history"}),L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",{staticClass:"header"},[s("router-link",{staticClass:"logo",attrs:{to:{name:"home"}}}),s("search-bar"),s("span",{staticClass:"guide",on:{click:t.toggleSidebar}})],1),s("transition",{attrs:{name:"shadow-"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.checkSearchResult,expression:"checkSearchResult"}],staticClass:"shadow",on:{click:function(e){t.hideSearchResult(!1)}}})]),s("side-bar"),s("error-box",{attrs:{index:"main"}}),s("router-view")],1)},j=[],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.sidebarShowHold,expression:"sidebarShowHold"}],staticClass:"sidebar"},[s("transition",{attrs:{name:"sidebar__wrapper-"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.sidebarShow,expression:"sidebarShow"}],staticClass:"sidebar__wrapper"},[s("div",{staticClass:"sidebar__header"},[s("span",{staticClass:"guide",on:{click:t.toggleSidebar}})]),s("div",{staticClass:"sidebar__content sidebar__content--scroll"},[s("div",{staticClass:"sidebar-group"},[s("div",{staticClass:"sidebar-group__title"},[t._v("\n                        Тестовый функционал\n                    ")]),s("div",{staticClass:"sidebar-group__item",on:{click:t.insertVideo}},[s("span",[t._v("Показать тестовое видео")])]),s("div",{staticClass:"sidebar-group__item",on:{click:t.openError}},[s("span",[t._v("Показать ошибку")])])])]),s("div",{staticClass:"sidebar__content sidebar__content--scroll"},[s("div",{staticClass:"sidebar-group"},[s("div",{staticClass:"sidebar-group__title"},[t._v("\n                        Управление хранилищем\n                    ")]),s("div",{staticClass:"sidebar-group__item",on:{click:t.removeWindowsInStorage}},[s("span",[t._v("Удалить сохранённые данные")])])])]),t._e(),s("div",{staticClass:"sidebar__footer"},[t._v("\n                Ресурс позволяет пользователю одновременно просматривать несколько стримов или видео с YouTube и Twitch.\n            ")]),s("div",{staticClass:"sidebar__copyright"},[t._v("\n                © 2018 Levin Pavel, MIT\n            ")])])]),s("transition",{attrs:{name:"sidebar__shadow-"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.shadowShow,expression:"shadowShow"}],staticClass:"sidebar__shadow",on:{click:t.toggleSidebar}})])],1)},B=[],I=s("be94"),q=s("2f62"),N={name:"Sidebar",data:function(){return{sidebarShowHold:0,sidebarShow:0,shadowShow:0}},computed:Object(I["a"])({},Object(q["b"])("menu",{menuList:"items"})),methods:{toggleSidebar:function(){this.sidebarShow=!this.sidebarShow,this.shadowShow=!this.shadowShow,this.sidebarShow?document.querySelector("html").setAttribute("class","hide-scroll"):document.querySelector("html").removeAttribute("class")},insertVideo:function(){at.$emit("urlUpdate"),this.toggleSidebar()},openError:function(){this.$store.dispatch("setError",{text:"Пример общей ошибки",index:"main"}),this.toggleSidebar()},removeWindowsInStorage:function(){at.$emit("cleanUpdate")}},watch:{sidebarShow:function(){var t=this;this.sidebarShowHold?setTimeout(function(){t.sidebarShowHold=!t.sidebarShowHold},200):this.sidebarShowHold=!this.sidebarShowHold}},created:function(){var t=this;at.$on("sidebarShow",function(){t.toggleSidebar()})}},H=N,T=(s("f203"),Object(p["a"])(H,P,B,!1,null,null,null)),D=T.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-search"},[s("keep-alive",[s("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.query,expression:"query",modifiers:{trim:!0,lazy:!0}}],staticClass:"form-search__input",attrs:{type:"search",placeholder:"Введите запрос"},domProps:{value:t.query},on:{click:t.clearSelectVideoUrl,change:[function(e){t.query=e.target.value.trim()},t.sendingRequest],blur:function(e){t.$forceUpdate()}}})]),s("div",{staticClass:"form-search__btn",on:{click:t.sendingRequest}}),t.showResult?s("ul",{staticClass:"form-search-list form-search-list--scroll"},t._l(t.result.items,function(e,i){return s("li",{key:i,staticClass:"form-search-list__item",on:{click:function(s){t.selectVideoUrl(e.id.videoId)}}},[s("div",{staticClass:"form-search-list__thumb"},[s("img",{attrs:{src:e.snippet.thumbnails.default.url,alt:e.snippet.title}})]),s("div",{staticClass:"form-search-list__title"},[t._v("\n                "+t._s(e.snippet.title)+"\n            ")]),s("div",{staticClass:"form-search-list__channel"},[t._v("\n                "+t._s(e.snippet.channelTitle)+"\n            ")])])}),0):t._e()],1)},z=[],M={name:"SearchBar",data:function(){return{provider:"youtube",query:"",result:!1,showResult:!1}},computed:{checkSearchResult:function(){return this.$store.getters.getSearchShadow}},methods:{selectVideoUrl:function(t){"youtube"===this.provider&&t.length?this.$store.dispatch("setSelectVideoUrl","https://www.youtube.com/embed/".concat(t)):this.$store.dispatch("setError",{text:"Не удалось получить videoId",index:"main"}),this.toggleResult(!1)},clearSelectVideoUrl:function(){this.$store.dispatch("clearSelectVideoUrl")},sendingRequest:function(){var t=this;"youtube"===this.provider&&this.query.length?this.$store.dispatch("search",this.query).then(function(){t.result=t.$store.getters.getSearchData,t.result.pageInfo.totalResults?t.toggleResult(!0):(t.toggleResult(!1),t.$store.dispatch("setError",{text:"Поиск не дал результатов",index:"main"}))}).catch(function(){}):(this.toggleResult(!1),this.$store.dispatch("setError",{text:"Поисковый запрос пуст",index:"main"}))},toggleResult:function(t){this.showResult=t,this.$store.dispatch("setShadow",t)}},created:function(){var t=this;at.$on("searchHide",function(e){t.toggleResult(e)})}},A=M,G=(s("0510"),Object(p["a"])(A,J,z,!1,null,"6d359f2e",null)),X=G.exports,Y={name:"app",data:function(){return{}},components:{errorBox:g,sideBar:D,searchBar:X},computed:{checkSearchResult:function(){return this.$store.getters.getSearchShadow}},methods:{toggleSidebar:function(){at.$emit("sidebarShow")},hideSearchResult:function(t){at.$emit("searchHide",t)}}},F=Y,K=(s("5c0b"),Object(p["a"])(F,L,j,!1,null,null,null)),Q=K.exports,Z={state:{loading:!1,error:""},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},clearError:function(t){t.error=""}},actions:{setLoading:function(t,e){var s=t.commit;s("setLoading",e)},setError:function(t,e){var s=t.commit;s("setError",e)},clearError:function(t){var e=t.commit;e("clearError")}},getters:{loading:function(t){return t.loading},error:function(t){return t.error}}},tt=(s("96cf"),s("1da1")),et=s("a236"),st=s.n(et),it={namespaced:!1,state:{selectVideoUrl:!1,searchData:{},searchShadow:!1},mutations:{setSelectVideoUrl:function(t,e){t.selectVideoUrl=e},setSearchData:function(t,e){t.searchData=e},setShadow:function(t,e){t.searchShadow=e},clearSelectVideoUrl:function(t){t.selectVideoUrl=!1}},actions:{setSelectVideoUrl:function(t,e){var s=t.commit;s("setSelectVideoUrl",e)},setShadow:function(t,e){var s=t.commit;s("setShadow",e)},clearSelectVideoUrl:function(t){var e=t.commit;e("clearSelectVideoUrl")},search:function(){var t=Object(tt["a"])(regeneratorRuntime.mark(function t(e,s){var i,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.commit,i("clearError"),t.prev=2,t.next=5,st()("AIzaSyAOmRCB6nA7SR2_XnPR9XaGWpSyB-f7mrs",{q:s,part:"snippet",type:"video",maxResults:35});case 5:r=t.sent,i("setSearchData",r),i("setLoading",!1),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](2),i("setError",{text:"Неизвестная ошибка",index:"main"}),i("setLoading",!1),t.t0;case 15:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e,s){return t.apply(this,arguments)}}()},getters:{getSelectVideoUrl:function(t){return t.selectVideoUrl},getSearchData:function(t){return t.searchData},getSearchShadow:function(t){return t.searchShadow}}},rt={namespaced:!0,state:{items:[{url:"/history",text:"Показать историю"}]},getters:{items:function(t){return t.items}}};i["a"].use(q["a"]);var nt=new q["a"].Store({modules:{common:Z,search:it,menu:rt}});s.d(e,"eventEmitter",function(){return at}),i["a"].config.productionTip=!1;var at=new i["a"];new i["a"]({render:function(t){return t(Q)},router:V,store:nt}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var i=s("5e27"),r=s.n(i);r.a},"5e27":function(t,e,s){},"5fd1":function(t,e,s){"use strict";var i=s("ba74"),r=s.n(i);r.a},"7ab1":function(t,e,s){"use strict";var i=s("42d0"),r=s.n(i);r.a},9604:function(t,e,s){},ba74:function(t,e,s){},d3c9:function(t,e,s){"use strict";var i=s("9604"),r=s.n(i);r.a},f203:function(t,e,s){"use strict";var i=s("0466"),r=s.n(i);r.a}});
//# sourceMappingURL=app.6fd33b82.js.map