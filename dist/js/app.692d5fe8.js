(function(t){function e(e){for(var i,a,o=e[0],c=e[1],d=e[2],u=0,h=[];u<o.length;u++)a=o[u],s[a]&&h.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(h.length)h.shift()();return n.push.apply(n,d||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],i=!0,o=1;o<r.length;o++){var c=r[o];0!==s[c]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=r[0]))}return t}var i={},s={app:0},n=[];function a(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=i,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(r,i,function(e){return t[e]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0466":function(t,e,r){},"1aeb":function(t,e,r){"use strict";var i=r("c1af"),s=r.n(i);s.a},"42d0":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var i=r("2b0e"),s=r("8c4f"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Broadcast")},a=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},t._l(t.windows,function(e,i){return r("div",{key:i,staticClass:"broadcast",class:{"broadcast--loading":e.url,"broadcast--disabled":e.disabled,"broadcast--first":i===t.firstWindow&&!e.disabled,"broadcast--hidden":e.index===t.hiddenWindow,"broadcast--scale":1===t.hiddenWindow,"broadcast--flicker":t.checkSelectVideoUrl},on:{click:function(e){t.selectWindow(i,t.checkSelectVideoUrl)}}},[e.disabled?r("div",{staticClass:"broadcast__append",on:{click:t.addBroadcast}}):t._e(),r("div",{staticClass:"broadcast__bar"},[null!==t.hiddenWindow?r("div",{staticClass:"broadcast__btn broadcast__btn--maximize",attrs:{title:"Развернуть окно добавления"},on:{click:function(r){t.toggleWindows(e.index)}}}):t._e(),e.disabled&&null===t.hiddenWindow?r("div",{staticClass:"broadcast__btn broadcast__btn--minimize",attrs:{title:"Свернуть окно"},on:{click:function(r){t.toggleWindows(e.index)}}}):t._e(),e.chat.url.length?r("div",{staticClass:"broadcast__btn broadcast__btn--chat",attrs:{title:"Показать/скрыть чат"},on:{click:function(e){t.toggleChat(i)}}}):t._e(),i!==t.firstWindow?r("div",{staticClass:"broadcast__btn broadcast__btn--expand",attrs:{title:"Сделать основным"},on:{click:function(e){t.mainWindow(i)}}}):t._e(),r("div",{staticClass:"broadcast__btn broadcast__btn--close",attrs:{title:"Удалить окно"},on:{click:function(e){t.deleteBroadcast(i)}}})]),r("div",{staticClass:"broadcast__number",domProps:{innerHTML:t._s(e.index)}}),r("div",{staticClass:"broadcast__video"},[r("iframe",{attrs:{width:"560",height:"315",src:e.url,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),r("transition",{attrs:{name:"broadcast__chat-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.chat.show,expression:"win.chat.show"}],staticClass:"broadcast__chat"},[r("iframe",{attrs:{width:"240",height:"315",src:e.chat.url,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])])],1),r("div",{staticClass:"broadcast__panel"},[r("keep-alive",[r("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.url,expression:"win.url",modifiers:{trim:!0,lazy:!0}}],attrs:{type:"text",placeholder:"Вставьте URL"},domProps:{value:e.url},on:{change:[function(r){t.$set(e,"url",r.target.value.trim())},function(e){t.lineProcessing(i)}],blur:function(e){t.$forceUpdate()}}})]),r("div",{staticClass:"broadcast__panel-enter",attrs:{title:"Ввод"},on:{click:function(e){t.lineProcessing(i)}}})],1),r("error-box",{attrs:{index:i}})],1)}),0)},c=[],d=r("f596"),l=r.n(d),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"error-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.error.index===t.index,expression:"error.index === index"}],staticClass:"error-box",on:{mouseenter:t.closeError}},[r("div",{staticClass:"error-box__message",domProps:{innerHTML:t._s(t.error.text)}})])])},h=[],w={name:"Error",props:{index:{required:!0,default:""}},data:function(){return{result:{}}},methods:{closeError:function(){this.$store.dispatch("clearError")}},computed:{error:function(){return this.$store.getters.error}}},f=w,p=(r("7ab1"),r("2877")),m=Object(p["a"])(f,u,h,!1,null,null,null);m.options.__file="Error.vue";var v=m.exports,b={name:"Broadcast",data:function(){return{windows:[{index:1,url:"",disabled:0,chat:{url:"",show:1}}],windowsInterator:0,firstWindow:0,hiddenWindow:null}},components:{errorBox:v},computed:{checkSelectVideoUrl:function(){return this.$store.getters.getSelectVideoUrl}},methods:{lineProcessing:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.url||this.windows[t].url,i=l.a.parse(r);if(void 0===i)return this.$store.dispatch("setError",{text:"Введенный адрес ресурса не поддерживается",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;if(e.hasOwnProperty("show")&&(this.windows[t].chat.show=e.chat.show),"youtube"===i.provider){var s="?autoplay=1"+(t?"&mute=1":"&mute=0");if(!i.id)return this.$store.dispatch("setError",{text:"Проверьте URL введенного YouTube канала",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;this.windows[t].url="https://www.youtube.com/embed/".concat(i.id).concat(s),this.windows[t].chat.url="https://www.youtube.com/live_chat?v=".concat(i.id,"&embed_domain=").concat(document.domain)}if("twitch"===i.provider){var n="&autoplay=true"+(t?"&muted=true":"&muted=false");if(i.channel&&"directory"!==i.channel)this.windows[t].url="https://player.twitch.tv/?channel=".concat(i.channel).concat(n),this.windows[t].chat.url="https://www.twitch.tv/embed/".concat(i.channel,"/chat?darkpopout");else{if(!i.id)return this.$store.dispatch("setError",{text:"Проверьте URL введенного Twitch канала",index:t}),this.windows[t].url="",this.windows[t].chat.url="",!1;this.windows[t].url="https://player.twitch.tv/?video=".concat(i.id).concat(n),this.windows[t].chat.url="https://www.twitch.tv/embed/".concat(i.channel,"/chat?darkpopout")}}},addBroadcast:function(){var t=this.windows[this.windowsInterator];t.disabled=0,this.windowsInterator++,this.$set(this.windows,this.windowsInterator,{url:"",disabled:1,chat:{url:"",show:0},index:t.index+1})},deleteBroadcast:function(t){this.windowsInterator--,this.$delete(this.windows,t),this.firstWindow=this.windowsInterator>1?this.firstWindow:0,this.hiddenWindow=this.windowsInterator?this.hiddenWindow:null},mainWindow:function(t){this.firstWindow=t},toggleWindows:function(t){null===this.hiddenWindow?this.hiddenWindow=t:this.hiddenWindow=null},toggleChat:function(t){var e=this.windows[t].chat;e.show=!e.show},selectWindow:function(t,e){this.lineProcessing(t,{url:e}),this.$store.dispatch("clearSelectVideoUrl")}},mounted:function(){},created:function(){var t=this;this.addBroadcast(),K.$on("urlUpdated",function(e){var r=t.firstWindow;e=e||{url:"https://www.youtube.com/embed/oI3GdbsbDxk",chat:{show:1}},t.lineProcessing(r,e)})}},_=b,g=(r("856a"),Object(p["a"])(_,o,c,!1,null,"9ac56006",null));g.options.__file="Broadcast.vue";var S=g.exports,x={name:"home",data:function(){return{}},components:{Broadcast:S},methods:{}},y=x,C=Object(p["a"])(y,n,a,!1,null,null,null);C.options.__file="Home.vue";var k=C.exports;i["a"].use(s["a"]);var $=new s["a"]({routes:[{path:"",name:"home",component:k}],mode:"history"}),E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("header",{staticClass:"header"},[r("router-link",{staticClass:"logo",attrs:{to:"/"}}),r("search-bar"),r("span",{staticClass:"guide",on:{click:t.toggleSidebar}})],1),r("side-bar"),r("error-box",{attrs:{index:"main"}}),r("router-view")],1)},U=[],W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.sidebarShowHold,expression:"sidebarShowHold"}],staticClass:"sidebar"},[r("transition",{attrs:{name:"sidebar__wrapper-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.sidebarShow,expression:"sidebarShow"}],staticClass:"sidebar__wrapper"},[r("div",{staticClass:"sidebar__header"},[r("span",{staticClass:"guide",on:{click:t.toggleSidebar}})]),r("div",{staticClass:"sidebar__content sidebar__content--scroll"},[r("div",{staticClass:"sidebar-group"},[r("div",{staticClass:"sidebar-group__title"},[t._v("\n                        Тестовый функционал\n                    ")]),r("div",{staticClass:"sidebar-group__item",on:{click:t.insertVideo}},[r("span",[t._v("Показать тестовое видео")])]),r("div",{staticClass:"sidebar-group__item",on:{click:t.openError}},[r("span",[t._v("Показать ошибку")])])])]),r("div",{staticClass:"sidebar__footer"},[t._v("\n                Ресурс позволяет пользователю одновременно просматривать несколько стримов или видео с YouTube и Twitch.\n            ")]),r("div",{staticClass:"sidebar__copyright"},[t._v("\n                © 2018 Levin Pavel, MIT\n            ")])])]),r("transition",{attrs:{name:"sidebar__shadow-"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.shadowShow,expression:"shadowShow"}],staticClass:"sidebar__shadow",on:{click:t.toggleSidebar}})])],1)},V=[],O={name:"Sidebar",data:function(){return{sidebarShowHold:0,sidebarShow:0,shadowShow:0}},methods:{toggleSidebar:function(){this.sidebarShow=!this.sidebarShow,this.shadowShow=!this.shadowShow,this.sidebarShow?document.querySelector("html").setAttribute("class","hide-scroll"):document.querySelector("html").removeAttribute("class")},insertVideo:function(){K.$emit("urlUpdated"),this.toggleSidebar()},openError:function(){this.$store.dispatch("setError",{text:"Пример общей ошибки",index:"main"}),this.toggleSidebar()}},watch:{sidebarShow:function(){var t=this;this.sidebarShowHold?setTimeout(function(){t.sidebarShowHold=!t.sidebarShowHold},200):this.sidebarShowHold=!this.sidebarShowHold}},created:function(){var t=this;K.$on("sidebarShow",function(){t.toggleSidebar()})}},P=O,B=(r("f203"),Object(p["a"])(P,W,V,!1,null,null,null));B.options.__file="Sidebar.vue";var j=B.exports,q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-search"},[r("keep-alive",[r("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.query,expression:"query",modifiers:{trim:!0,lazy:!0}}],staticClass:"form-search__input",attrs:{type:"search",placeholder:"Введите запрос"},domProps:{value:t.query},on:{click:t.clearSelectVideoUrl,change:[function(e){t.query=e.target.value.trim()},t.sendingRequest],blur:function(e){t.$forceUpdate()}}})]),r("div",{staticClass:"form-search__btn",on:{click:t.sendingRequest}}),t.result?r("ul",{staticClass:"form-search-list form-search-list--scroll",on:{click:function(e){t.result=!1}}},t._l(t.result.items,function(e,i){return r("li",{key:i,staticClass:"form-search-list__item",on:{click:function(r){t.selectVideoUrl(e.id.videoId)}}},[r("div",{staticClass:"form-search-list__thumb"},[r("img",{attrs:{src:e.snippet.thumbnails.default.url,alt:e.snippet.title}})]),r("div",{staticClass:"form-search-list__title"},[t._v("\n                "+t._s(e.snippet.title)+"\n            ")]),r("div",{staticClass:"form-search-list__channel"},[t._v("\n                "+t._s(e.snippet.channelTitle)+"\n            ")])])}),0):t._e()],1)},I=[],R={name:"SearchBar",data:function(){return{provider:"youtube",shadowShow:0,query:"",result:!1}},methods:{selectVideoUrl:function(t){"youtube"===this.provider&&t.length?this.$store.dispatch("setSelectVideoUrl","https://www.youtube.com/embed/".concat(t)):this.$store.dispatch("setError",{text:"Не удалось получить videoId",index:"main"})},sendingRequest:function(){var t=this;"youtube"===this.provider&&this.query.length?this.$store.dispatch("search",this.query).then(function(){if(t.result=t.$store.getters.getSearchData,!t.result.pageInfo.totalResults)return t.$store.dispatch("setError",{text:"Поиск не дал результатов",index:"main"})}).catch(function(){}):this.$store.dispatch("setError",{text:"Поисковый запрос пуст",index:"main"})},clearSelectVideoUrl:function(){this.$store.dispatch("clearSelectVideoUrl")}}},L=R,T=(r("1aeb"),Object(p["a"])(L,q,I,!1,null,"360408d2",null));T.options.__file="SearchBar.vue";var H=T.exports,D={name:"app",data:function(){return{}},components:{errorBox:v,sideBar:j,searchBar:H},methods:{toggleSidebar:function(){K.$emit("sidebarShow")}},created:function(){}},z=D,M=(r("5c0b"),Object(p["a"])(z,E,U,!1,null,null,null));M.options.__file="App.vue";var N=M.exports,A=r("2f62"),G=(r("96cf"),r("1da1")),J=r("a236"),X=r.n(J),Y={state:{selectVideoUrl:!1,searchData:{},loading:!1,error:""},mutations:{setSelectVideoUrl:function(t,e){t.selectVideoUrl=e},setSearchData:function(t,e){t.searchData=e},setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},clearSelectVideoUrl:function(t){t.selectVideoUrl=!1},clearError:function(t){t.error=""}},actions:{setSelectVideoUrl:function(t,e){var r=t.commit;r("setSelectVideoUrl",e)},setLoading:function(t,e){var r=t.commit;r("setLoading",e)},setError:function(t,e){var r=t.commit;r("setError",e)},clearSelectVideoUrl:function(t){var e=t.commit;e("clearSelectVideoUrl")},clearError:function(t){var e=t.commit;e("clearError")},search:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(e,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.commit,i("clearError"),i("setLoading",!0),t.prev=3,t.next=6,X()("AIzaSyAOmRCB6nA7SR2_XnPR9XaGWpSyB-f7mrs",{q:r,part:"snippet",type:"video",maxResults:34});case 6:s=t.sent,i("setSearchData",s),i("setLoading",!1),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),i("setError",{text:"Неизвестная ошибка",index:"main"}),i("setLoading",!1);case 15:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e,r){return t.apply(this,arguments)}}()},getters:{getSelectVideoUrl:function(t){return t.selectVideoUrl},getSearchData:function(t){return t.searchData},loading:function(t){return t.loading},error:function(t){return t.error}}};i["a"].use(A["a"]);var F=new A["a"].Store({modules:{common:Y}});r.d(e,"eventEmitter",function(){return K}),i["a"].config.productionTip=!1;var K=new i["a"];new i["a"]({render:function(t){return t(N)},router:$,store:F}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var i=r("5e27"),s=r.n(i);s.a},"5e27":function(t,e,r){},7842:function(t,e,r){},"7ab1":function(t,e,r){"use strict";var i=r("42d0"),s=r.n(i);s.a},"856a":function(t,e,r){"use strict";var i=r("7842"),s=r.n(i);s.a},c1af:function(t,e,r){},f203:function(t,e,r){"use strict";var i=r("0466"),s=r.n(i);s.a}});
//# sourceMappingURL=app.692d5fe8.js.map